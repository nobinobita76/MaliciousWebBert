<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
  <title>unlockACGWeb Pro - 『刀乱舞』锻造统计 - 一期一振</title> 
  <link rel="stylesheet" type="text/css" href="http://daofeng.591mogu.com/static/css/bootstrap.min.css" /> 
  <link rel="stylesheet" type="text/css" href="http://daofeng.591mogu.com/static/css/user.css" /> 
  <link rel="stylesheet" type="text/css" href="http://daofeng.591mogu.com/static/css/user_temp.css" /> 
  <script type="text/javascript">
	var contextPath = 'http://daofeng.591mogu.com';
	var ajaxContextPath = 'http://daofeng.591mogu.com';
		window.onerror = function(){   
	   return true;
	} 
	</script> 
  <script type="text/javascript" src="http://daofeng.591mogu.com/static/js/jquery.js"></script> 
  <script type="text/javascript" src="http://daofeng.591mogu.com/static/js/bootstrap.min.js"></script> 
  <script type="text/javascript" src="http://daofeng.591mogu.com/static/js/ajax.js"></script> 
  <script type="text/javascript" src="http://daofeng.591mogu.com/static/js/common.js"></script> 
  <!--[if IE]>
	<link rel="stylesheet" href="http://daofeng.591mogu.com/static/css/ie.css" >
	<![endif]--> 
 </head> 
 <body> 
  <div class="navbar-top"> 
   <div class="container"> 
    <div class="navbar-header">
     <a class="navbar-brand" href="http://daofeng.591mogu.com">unlockACGWeb Pro</a>
    </div> 
    <div class="header-account"> 
     <a class="btn btn-primary btn-signin" href="http://daofeng.591mogu.com/Account/login">登录</a>
     <a class="btn btn-primary btn-signup" href="http://daofeng.591mogu.com/Account/register">注册</a> 
    </div> 
    <div class="navbar-collapse collapse" id="navbar-main"> 
     <ul class="nav navbar-nav"> 
      <li class="nav-item game-wiki"> <a href="javascript:;">游戏数据统计</a> 
       <ul class="items"> 
        <li><a href="http://daofeng.591mogu.com/Kancollewiki/viewCreateShipLogList">『これ』建造统计</a></li> 
        <li><a href="http://daofeng.591mogu.com/Toukenranbuwiki/viewForgeLogList">『刀乱舞』锻造统计</a></li> 
       </ul> </li> 
      <li class="nav-item game-cache"> <a href="http://daofeng.591mogu.com/Index/gameCache">游戏缓存包</a> 
       <ul class="items"> 
        <li><a href="http://daofeng.591mogu.com/Index/gameCache">游戏缓存包</a></li> 
        <li><a href="http://daofeng.591mogu.com/Index/KanColleLive2D">『これ』Live2D计划</a></li> 
       </ul> </li> 
      <li><a href="http://daofeng.591mogu.com/Index/userManual">使用说明</a></li> 
     </ul> 
    </div> 
   </div> 
  </div> 
  <style type="text/css">
  .table{margin-bottom:0;}
  .table_center{text-align:center;}
  .table_center th{text-align:center;}
  .secretary_order_body{float:left;width:240px;}
  .time_order_body{float:right;width:860px;}
  .time_order_body .panel-title{float:left;}
  .time_zone_body{float:right;height:17px;}
  .time_zone_body label{margin-bottom:0px;float:left;}
  .time_zone_select_body{float:left;margin-left:10px;}
  .time_zone_select_body select{height:27px;margin-top:-5px;padding:0 0 0 12px;}
</style> 
  <div class="container"> 
   <div class="page-header"> 
    <h1>『刀乱舞』锻造统计 - 一期一振</h1> 
    <div style="float:right;margin-right:10px;">
     ――珍惜资源，赌刀适度
    </div> 
    <div style="clear:both;"></div> 
   </div> 
   <div id="sword_info_body"> 
   </div> 
   <div style="margin:20px 5px 0 0;text-align:right;color:#bbb;"> 
    <p>最后更新时间: 北京时间 2017-03-27 04:06:47 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 统计锻造记录总数: 145436</p> 
    <p>本数据由一个月以来岛风GO的用户锻造数据分析所得，因为是在服务器上自动采样，所以应该比用户手动提交的Wiki类数据更准确</p> 
    <p>注意：官方从未正面回应过配方、秘书刀、时间与锻造结果之间的关系，本数据仅可作为参考使用</p> 
   </div> 
  </div> 
  <script type="text/javascript">
  var total_time_order_general = [{"time":0,"count":3905},{"time":1,"count":6857},{"time":2,"count":8068},{"time":3,"count":8831},{"time":4,"count":10968},{"time":5,"count":8456},{"time":6,"count":6451},{"time":7,"count":6124},{"time":8,"count":6429},{"time":9,"count":7073},{"time":10,"count":8372},{"time":11,"count":9306},{"time":12,"count":9666},{"time":13,"count":10310},{"time":14,"count":10571},{"time":15,"count":8518},{"time":16,"count":4815},{"time":17,"count":2298},{"time":18,"count":1226},{"time":19,"count":610},{"time":20,"count":2048},{"time":21,"count":1007},{"time":22,"count":1183},{"time":23,"count":2344}];
  var general_construction = {"order_by_succeed":[{"charcoal":550,"steel":660,"coolant":660,"file":550,"sum":7853,"succeed":28,"probability":0.3566},{"charcoal":550,"steel":650,"coolant":650,"file":550,"sum":5858,"succeed":26,"probability":0.4438},{"charcoal":550,"steel":550,"coolant":550,"file":550,"sum":4546,"succeed":20,"probability":0.4399},{"charcoal":999,"steel":999,"coolant":999,"file":999,"sum":2402,"succeed":20,"probability":0.8326},{"charcoal":950,"steel":950,"coolant":950,"file":950,"sum":2001,"succeed":15,"probability":0.7496},{"charcoal":750,"steel":750,"coolant":750,"file":750,"sum":1371,"succeed":9,"probability":0.6565},{"charcoal":350,"steel":350,"coolant":350,"file":350,"sum":6227,"succeed":8,"probability":0.1285},{"charcoal":600,"steel":600,"coolant":600,"file":510,"sum":1235,"succeed":7,"probability":0.5668},{"charcoal":529,"steel":529,"coolant":529,"file":529,"sum":1134,"succeed":4,"probability":0.3527},{"charcoal":650,"steel":650,"coolant":650,"file":650,"sum":651,"succeed":4,"probability":0.6144},{"charcoal":850,"steel":850,"coolant":850,"file":850,"sum":134,"succeed":4,"probability":2.9851},{"charcoal":650,"steel":550,"coolant":750,"file":750,"sum":264,"succeed":3,"probability":1.1364},{"charcoal":450,"steel":450,"coolant":450,"file":450,"sum":549,"succeed":3,"probability":0.5464},{"charcoal":710,"steel":710,"coolant":710,"file":710,"sum":339,"succeed":3,"probability":0.885},{"charcoal":720,"steel":720,"coolant":720,"file":720,"sum":396,"succeed":2,"probability":0.5051},{"charcoal":500,"steel":600,"coolant":700,"file":700,"sum":335,"succeed":2,"probability":0.597},{"charcoal":550,"steel":550,"coolant":660,"file":660,"sum":120,"succeed":2,"probability":1.6667},{"charcoal":500,"steel":500,"coolant":500,"file":500,"sum":274,"succeed":1,"probability":0.365},{"charcoal":600,"steel":500,"coolant":700,"file":700,"sum":590,"succeed":1,"probability":0.1695},{"charcoal":550,"steel":650,"coolant":750,"file":550,"sum":245,"succeed":1,"probability":0.4082},{"charcoal":500,"steel":600,"coolant":600,"file":500,"sum":999,"succeed":1,"probability":0.1001},{"charcoal":350,"steel":510,"coolant":350,"file":350,"sum":619,"succeed":1,"probability":0.1616},{"charcoal":660,"steel":550,"coolant":550,"file":660,"sum":123,"succeed":1,"probability":0.813},{"charcoal":550,"steel":660,"coolant":550,"file":660,"sum":133,"succeed":1,"probability":0.7519},{"charcoal":650,"steel":550,"coolant":550,"file":650,"sum":379,"succeed":1,"probability":0.2639},{"charcoal":411,"steel":411,"coolant":411,"file":411,"sum":122,"succeed":1,"probability":0.8197},{"charcoal":660,"steel":660,"coolant":660,"file":510,"sum":129,"succeed":1,"probability":0.7752},{"charcoal":504,"steel":604,"coolant":724,"file":507,"sum":154,"succeed":1,"probability":0.6494},{"charcoal":650,"steel":550,"coolant":650,"file":550,"sum":131,"succeed":1,"probability":0.7634},{"charcoal":550,"steel":650,"coolant":550,"file":550,"sum":139,"succeed":1,"probability":0.7194},{"charcoal":550,"steel":660,"coolant":760,"file":550,"sum":457,"succeed":1,"probability":0.2188},{"charcoal":520,"steel":520,"coolant":520,"file":520,"sum":207,"succeed":1,"probability":0.4831}],"order_by_probability":[{"charcoal":850,"steel":850,"coolant":850,"file":850,"sum":134,"succeed":4,"probability":2.9851},{"charcoal":550,"steel":550,"coolant":660,"file":660,"sum":120,"succeed":2,"probability":1.6667},{"charcoal":650,"steel":550,"coolant":750,"file":750,"sum":264,"succeed":3,"probability":1.1364},{"charcoal":710,"steel":710,"coolant":710,"file":710,"sum":339,"succeed":3,"probability":0.885},{"charcoal":999,"steel":999,"coolant":999,"file":999,"sum":2402,"succeed":20,"probability":0.8326},{"charcoal":411,"steel":411,"coolant":411,"file":411,"sum":122,"succeed":1,"probability":0.8197},{"charcoal":660,"steel":550,"coolant":550,"file":660,"sum":123,"succeed":1,"probability":0.813},{"charcoal":660,"steel":660,"coolant":660,"file":510,"sum":129,"succeed":1,"probability":0.7752},{"charcoal":650,"steel":550,"coolant":650,"file":550,"sum":131,"succeed":1,"probability":0.7634},{"charcoal":550,"steel":660,"coolant":550,"file":660,"sum":133,"succeed":1,"probability":0.7519},{"charcoal":950,"steel":950,"coolant":950,"file":950,"sum":2001,"succeed":15,"probability":0.7496},{"charcoal":550,"steel":650,"coolant":550,"file":550,"sum":139,"succeed":1,"probability":0.7194},{"charcoal":750,"steel":750,"coolant":750,"file":750,"sum":1371,"succeed":9,"probability":0.6565},{"charcoal":504,"steel":604,"coolant":724,"file":507,"sum":154,"succeed":1,"probability":0.6494},{"charcoal":650,"steel":650,"coolant":650,"file":650,"sum":651,"succeed":4,"probability":0.6144},{"charcoal":500,"steel":600,"coolant":700,"file":700,"sum":335,"succeed":2,"probability":0.597},{"charcoal":600,"steel":600,"coolant":600,"file":510,"sum":1235,"succeed":7,"probability":0.5668},{"charcoal":450,"steel":450,"coolant":450,"file":450,"sum":549,"succeed":3,"probability":0.5464},{"charcoal":720,"steel":720,"coolant":720,"file":720,"sum":396,"succeed":2,"probability":0.5051},{"charcoal":520,"steel":520,"coolant":520,"file":520,"sum":207,"succeed":1,"probability":0.4831},{"charcoal":550,"steel":650,"coolant":650,"file":550,"sum":5858,"succeed":26,"probability":0.4438},{"charcoal":550,"steel":550,"coolant":550,"file":550,"sum":4546,"succeed":20,"probability":0.4399},{"charcoal":550,"steel":650,"coolant":750,"file":550,"sum":245,"succeed":1,"probability":0.4082},{"charcoal":500,"steel":500,"coolant":500,"file":500,"sum":274,"succeed":1,"probability":0.365},{"charcoal":550,"steel":660,"coolant":660,"file":550,"sum":7853,"succeed":28,"probability":0.3566},{"charcoal":529,"steel":529,"coolant":529,"file":529,"sum":1134,"succeed":4,"probability":0.3527},{"charcoal":650,"steel":550,"coolant":550,"file":650,"sum":379,"succeed":1,"probability":0.2639},{"charcoal":550,"steel":660,"coolant":760,"file":550,"sum":457,"succeed":1,"probability":0.2188},{"charcoal":600,"steel":500,"coolant":700,"file":700,"sum":590,"succeed":1,"probability":0.1695},{"charcoal":350,"steel":510,"coolant":350,"file":350,"sum":619,"succeed":1,"probability":0.1616},{"charcoal":350,"steel":350,"coolant":350,"file":350,"sum":6227,"succeed":8,"probability":0.1285},{"charcoal":500,"steel":600,"coolant":600,"file":500,"sum":999,"succeed":1,"probability":0.1001}],"secretary_order":[{"secretary":3,"count":31,"secretary_name":"\u4e09\u65e5\u6708\u5b97\u8fd1"},{"secretary":130,"count":15,"secretary_name":"\u9db4\u4e38\u56fd\u6c38"},{"secretary":85,"count":12,"secretary_name":"\u52a0\u5dde\u6e05\u5149"},{"secretary":9,"count":10,"secretary_name":"\u5ca9\u878d"},{"secretary":59,"count":8,"secretary_name":"\u86cd\u4e38"},{"secretary":91,"count":8,"secretary_name":"\u548c\u6cc9\u5b88\u517c\u5b9a"},{"secretary":45,"count":8,"secretary_name":"\u4e71\u85e4\u56db\u90ce"},{"secretary":5,"count":7,"secretary_name":"\u5c0f\u72d0\u4e38"},{"secretary":25,"count":6,"secretary_name":"\u4e00\u671f\u4e00\u632f"},{"secretary":116,"count":6,"secretary_name":"\u5927\u5036\u5229\u4f3d\u7f85"}],"time_order":[{"time":0,"count":3},{"time":1,"count":8},{"time":2,"count":4},{"time":3,"count":14},{"time":4,"count":18},{"time":5,"count":9},{"time":6,"count":7},{"time":7,"count":7},{"time":8,"count":10},{"time":9,"count":13},{"time":10,"count":18},{"time":11,"count":17},{"time":12,"count":12},{"time":13,"count":17},{"time":14,"count":24},{"time":15,"count":15},{"time":16,"count":12},{"time":17,"count":6},{"time":18,"count":4},{"time":21,"count":1},{"time":22,"count":1},{"time":23,"count":3}]};
</script> 
  <script type="text/javascript" src="http://daofeng.591mogu.com/static/js/Chart.min.js"></script> 
  <script type="text/javascript">
  function getFormulasHtml(formulas, default_max_count) {
    var formulas_body = '<table class="table table-striped table-hover table_center">\r\n';
    formulas_body += '<thead><tr><th>木炭</th><th>玉</th><th>冷却材</th><th>砥石</th><th>公式总使用次数</th><th>出货次数</th><th>出货率</th></tr><thead>\r\n';
    formulas_body += '<tbody>\r\n';
    for (var i = 0; i < formulas.length; i++) {
      var formula = formulas[i];
      if (i < default_max_count)
        formulas_body += '<tr>';
      else
        formulas_body += '<tr style="display:none;">';
      formulas_body += '<td>' + formula.charcoal + '</td><td>' + formula.steel + '</td><td>' + formula.coolant + '</td><td>' + formula.file + '</td><td>' + formula.sum + '</td><td>' + formula.succeed + '</td><td>' + formula.probability.toFixed(4) + '%</td></tr>\r\n';
    }
    formulas_body += '</tbody>\r\n';
    formulas_body += '</table>\r\n';
    if (formulas.length > default_max_count) {
      formulas_body += '<div style="margin:10px;"><a class="btn btn-primary dropdown-toggle show_all" href="javascript:;">显示更多 <span class="caret"></span></a></div>';
    }
    return formulas_body;
  }

  function getForgeInfoHtml(create_info) {
    var list_body = '';
    if (create_info.order_by_succeed) {
      var s_body = '<div class="panel panel-primary order_by_succeed_body">\r\n';
      s_body += '<div class="panel-heading">\r\n';
      s_body += '<h3 class="panel-title">出货最多的公式</h3>\r\n';
      s_body += '</div>\r\n';
      s_body += '<div class="panel-body">\r\n';
      s_body += getFormulasHtml(create_info.order_by_succeed, 10);
      s_body += '</div>\r\n';
      s_body += '</div>\r\n';
      list_body += s_body;
    }
    if (create_info.order_by_probability) {
      var s_body = '<div class="panel panel-primary order_by_probability_body">\r\n';
      s_body += '<div class="panel-heading">\r\n';
      s_body += '<h3 class="panel-title">出货率最高的公式</h3>\r\n';
      s_body += '</div>\r\n';
      s_body += '<div class="panel-body">\r\n';
      s_body += getFormulasHtml(create_info.order_by_probability, 10);
      s_body += '</div>\r\n';
      s_body += '</div>\r\n';
      list_body += s_body;
    }
    if (create_info.secretary_order) {
      var s_body = '<div class="panel panel-primary secretary_order_body">\r\n';
      s_body += '<div class="panel-heading">\r\n';
      s_body += '<h3 class="panel-title">出货最多的秘书刀</h3>\r\n';
      s_body += '</div>\r\n';
      s_body += '<div class="panel-body">\r\n';
      s_body += '<table class="table table-striped table-hover">\r\n';
      s_body += '<thead><tr><th>秘书刀</th><th style="text-align:center;">出货次数</th></tr><thead>\r\n';
      s_body += '<tbody>\r\n';
      for (var i = 0; i < create_info.secretary_order.length; i++) {
        var secretary = create_info.secretary_order[i];
        s_body += '<tr><td>' + secretary.secretary_name + '</td><td style="text-align:center;">' + secretary.count + '</td></tr>\r\n';
      }
      s_body += '</tbody>\r\n';
      s_body += '</table>\r\n';
      s_body += '</div>\r\n';
      s_body += '</div>\r\n';
      list_body += s_body;
    }
    if (create_info.time_order) {
      var s_body = '<div class="panel panel-primary time_order_body">\r\n';
      s_body += '<div class="panel-heading">\r\n';
      s_body += '<h3 class="panel-title">玄学时间 / 出货率</h3>\r\n';
      s_body += '<div class="time_zone_body">\r\n';
      s_body += '<label for="select" class="control-label">选择参照时区</label>';
      s_body += '<div class="time_zone_select_body"><select class="form-control">';
      for (var tz = 0; tz <= 25; tz++) {
        var time_zone = 0;
        var tz_str = '';
        if (tz < 3) {
          time_zone = -(12 - tz);
          tz_str = '-' + (12 - tz).toString() + ':00';
        } else if (tz < 12) {
          time_zone = -(12 - tz);
          tz_str = '-0' + (12 - tz).toString() + ':00';
        } else if (tz == 12) {
          time_zone = 0;
          tz_str = '00:00 (UTC)';
        } else if (tz < 23) {
          time_zone = tz - 12;
          tz_str = '+0' + (tz - 12).toString() + ':00';
        } else {
          time_zone = tz - 12;
          tz_str = '+' + (tz - 12).toString() + ':00';
        }
        s_body += '<option value="' + time_zone.toString() + '">' + tz_str + '</option>';
      }
      s_body += '</select></div>'
      s_body += '</div>\r\n';
      s_body += '<div style="clear:both;"></div>';
      s_body += '</div>\r\n';
      s_body += '<noscript class="time_order_data">' + JSON.stringify(create_info.time_order) + '</noscript>';
      s_body += '<div class="panel-body">\r\n';
      s_body += '</div>\r\n';
      s_body += '</div>\r\n';
      list_body += s_body;
    }
    list_body += '<div style="clear:both;"></div>';
    return list_body;
  }

  var info_body = '';
  if (general_construction.secretary_order) {
    for (var i = 0; i < general_construction.time_order.length; i++) {
      general_construction.time_order[i].rate = (general_construction.time_order[i].count / total_time_order_general[i].count * 100).toFixed(2);
    }
    info_body += '<div class="form-group main-frame general_construction_body">\r\n';
    info_body += '<div class="page-header"><h2>锻造</h2></div>\r\n';
    info_body += getForgeInfoHtml(general_construction);
    info_body += '</div>\r\n';
  }

  $J("#sword_info_body").html(info_body);
  $J("a.show_all").click(function () {
    $J(this).parent().parent().find('tr').show();
    $J(this).parent().hide();
  });
  $J("div.time_order_body .time_zone_body select").change(function () {
    var time_zone = parseInt($J(this).val());
    var time_order_body = $J(this).parent().parent().parent().parent();
    var time_order_data = JSON.parse(time_order_body.find('noscript.time_order_data').html());
    var ChartData = { labels: [], datasets: [{ fillColor: "rgba(220,220,220,0.5)", strokeColor: "rgba(220,220,220,1)", pointColor: "rgba(220,220,220,1)", pointStrokeColor: "#fff", data: []}] };
    for (var t = 0; t < 24; t++) {
      ChartData.labels.push((t < 10) ? ('0' + t.toString() + ':00') : (t.toString() + ':00'));
      var zt = t - time_zone;
      if (time_zone < 0)
        zt -= 24;
      if (zt < 0)
        zt = 24 + (zt % 24);
      else if (zt > 24)
        zt = zt % 24;
      var rate = 0;
      for (var tokey in time_order_data) {
        if (time_order_data[tokey].time == zt) {
          rate = time_order_data[tokey].rate;
          break;
        }
      }
      ChartData.datasets[0].data.push(rate);
    }
    time_order_body.find('div.panel-body').html('<canvas></canvas>');
    var canvas = time_order_body.find('div.panel-body canvas');
    var secretary_order_panel = time_order_body.parent().find('div.secretary_order_body div.panel-body');
    canvas.attr('height', secretary_order_panel.height() - 5).attr('width', time_order_body.find('div.panel-body').width());
    var ctx = canvas.get(0).getContext("2d");
    Chart.defaults.global.tooltipTemplate = "<%if (label){%><%=label%>: <%}%><%= value %>%";
    new Chart(ctx).Line(ChartData, {});
  });
  var SystemTimeZone = Math.round((-(new Date()).getTimezoneOffset()) / 60);
  $J("div.time_order_body .time_zone_body select").val(SystemTimeZone.toString()).change();
</script> 
  <div class="container"> 
   <div class="footer"> 
    <div>
     unlockACGWeb 非翻墙工具，仅可以浏览某些特定日本ACG网站。
    </div> 
    <div>
     unlockACGWeb Pro 为 unlockACGWeb 的收费版本。
    </div> 
   </div> 
  </div> 
  <script src="http://daofeng.591mogu.com/static/js/common_footer.ui.js"></script> 
  <div style="display:none;">
   <script src="http://daofeng.591mogu.com/static/js/cnzz.js" type="text/javascript" language="JavaScript"></script>
  </div>  
 </body>
</html>